<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vue ê²Œì‹œíŒ ëª©ë¡</title>
    <style>
      h1 {
        text-align: center;
        color: #333;
      }
      ul {
        list-style-type: none;
        padding: 0;
      }
      .post-item {
        cursor: pointer;
        padding: 10px;
        border-bottom: 1px solid #ddd;
      }
      .post-item:hover {
        background: #f4f4f4;
      }
      .post-content {
        margin-top: 20px;
        padding: 15px;
        border: 1px solid #ddd;
        border-radius: 5px;
        background: #fff;
      }
      button {
        margin-top: 10px;
        padding: 5px 10px;
        border: none;
        background: #ff6b6b;
        color: white;
        cursor: pointer;
        border-radius: 3px;
      }
      button:hover {
        background: #ff4f4f;
      }
    </style>
  </head>
  <body>
    <div id="app">
      <h1>ğŸ“Œ ê²Œì‹œíŒ ëª©ë¡</h1>

      <div>
        <ul>
          <li
            v-for="(post, index) in posts"
            :key="post.no"
            @click="selectPost(post)"
            class="post-item"
          >
            {{post.no}}. {{post.title}}
          </li>
        </ul>
      </div>
      <div v-if="selectedPost" class="post-content">
        <h2>{{selectedPost.title}}</h2>
        <p>{{selectedPost.content}}</p>
        <div v-if="isUpdate">
          <label>ì œëª©<input type="text" v-model="editedTitle" /></label><br />
          <label>ë‚´ìš©<input type="text" v-model="editedContent" /></label><br />
          <button @click="savePost">ìˆ˜ì •ì™„ë£Œ</button>
        </div>
        <button @click="removePost">ê²Œì‹œê¸€ ì‚­ì œ</button>
        <button @click="startEditing" v-if="!isUpdate">ê²Œì‹œê¸€ ìˆ˜ì •í•˜ê¸°</button>

        <button @click="closePost">ë‹«ê¸°</button>
      </div>
      <div v-if="!isUpdate">
        <label>ê²Œì‹œê¸€ ì œëª©<input type="text" v-model="newPost.title" /></label
        ><br />
        <label>ê²Œì‹œê¸€ ë‚´ìš©<input type="text" v-model="newPost.content" /></label
        ><br />
        <button @click="addPost">ê²Œì‹œê¸€ ì¶”ê°€</button>
      </div>
    </div>

    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script>
      const { createApp, ref } = Vue;

      createApp({
        setup() {
          const isUpdate = ref(false);
          // ê²Œì‹œê¸€ ëª©ë¡
          const posts = ref([
            {
              no: 1,
              title: 'Vue.js ê¸°ì´ˆ ë°°ìš°ê¸°',
              content:
                'Vue.jsëŠ” ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤ë¥¼ êµ¬ì¶•í•˜ê¸° ìœ„í•œ í”„ë¡œê·¸ë ˆì‹œë¸Œ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.',
            },
            {
              no: 2,
              title: 'ìë°”ìŠ¤í¬ë¦½íŠ¸ ES6 ë¬¸ë²•',
              content:
                'ES6ëŠ” JavaScriptì˜ ìµœì‹  ë¬¸ë²•ì„ í¬í•¨í•˜ë©°, let/const, í™”ì‚´í‘œ í•¨ìˆ˜, êµ¬ì¡° ë¶„í•´ í• ë‹¹ ë“±ì„ ì œê³µí•©ë‹ˆë‹¤.',
            },
            {
              no: 3,
              title: 'Node.jsì™€ Express',
              content:
                'Node.jsëŠ” ì„œë²„ ì¸¡ì—ì„œ JavaScriptë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ëŸ°íƒ€ì„ì´ë©°, ExpressëŠ” ì´ë¥¼ ìœ„í•œ ê²½ëŸ‰ ì›¹ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.',
            },
            {
              no: 4,
              title: 'MongoDB ê¸°ë³¸ ê°œë…',
              content:
                'MongoDBëŠ” NoSQL ë°ì´í„°ë² ì´ìŠ¤ë¡œ JSONê³¼ ìœ ì‚¬í•œ ë¬¸ì„œ ê¸°ë°˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
            },
            {
              no: 5,
              title: 'í”„ë¡ íŠ¸ì—”ë“œì™€ ë°±ì—”ë“œì˜ ì°¨ì´',
              content:
                'í”„ë¡ íŠ¸ì—”ë“œëŠ” ì‚¬ìš©ìê°€ ë³´ëŠ” ë¶€ë¶„ì„ ê°œë°œí•˜ëŠ” ê²ƒì´ê³ , ë°±ì—”ë“œëŠ” ì„œë²„ì™€ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê´€ë¦¬í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.',
            },
            {
              no: 6,
              title: 'ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë°',
              content:
                'JavaScriptì˜ ë¹„ë™ê¸° ì²˜ë¦¬ ë°©ì‹ì—ëŠ” ì½œë°±, í”„ë¡œë¯¸ìŠ¤, async/awaitê°€ ìˆìŠµë‹ˆë‹¤.',
            },
            {
              no: 7,
              title: 'Vue Router ì‚¬ìš©ë²•',
              content:
                'Vue Routerë¥¼ ì‚¬ìš©í•˜ë©´ Vue.js ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í˜ì´ì§€ ì´ë™ì„ ì‰½ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
            },
            {
              no: 8,
              title: 'ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ ê°œë°œ',
              content:
                'Vue.jsì—ì„œëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ì—¬ UIë¥¼ ì‘ì€ ë‹¨ìœ„ë¡œ ìª¼ê°œì„œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
            },
            {
              no: 9,
              title: 'CSSì™€ SCSS ì°¨ì´ì ',
              content:
                'SCSSëŠ” CSSì˜ í™•ì¥ëœ ë²„ì „ìœ¼ë¡œ ë³€ìˆ˜, ì¤‘ì²©, ë¯¹ìŠ¤ì¸ ë“±ì„ ì§€ì›í•©ë‹ˆë‹¤.',
            },
            {
              no: 10,
              title: 'Gitê³¼ GitHub ì‚¬ìš©ë²•',
              content:
                'Gitì€ ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œì´ë©°, GitHubëŠ” ì´ë¥¼ í™œìš©í•œ ì›ê²© ì €ì¥ì†Œ í”Œë«í¼ì…ë‹ˆë‹¤.',
            },
          ]);

          // ì„ íƒí•œ ê²Œì‹œê¸€ ì´ˆê¸°í™”
          const selectedPost = ref(null);

          // ìƒˆ ê²Œì‹œê¸€ì— í•„ìš”í•œ ë°ì´í„° ê°ì²´
          const newPost = ref({
            title: '',
            content: '',
          });

          const editedTitle = ref('');
          const editedContent = ref('');

          // ê²Œì‹œê¸€ ì„ íƒ í•¨ìˆ˜ (í´ë¦­ ì‹œ ì‹¤í–‰)
          const selectPost = (post) => {
            // í´ë¦­ ì‹œ ì„ íƒí•œ ê²Œì‹œê¸€ì„ ì„¤ì •í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•˜ì„¸ìš”
            selectedPost.value = post;
            // ê²Œì‹œê¸€ ìˆ˜ì •í•  ë•Œ í•„ìš”í•¨ (ì œëª©ê³¼ ë‚´ìš© ë°”ë¡œ ë¶ˆëŸ¬ì˜¤ê¸° ìœ„í•´)
            editedTitle.value = post.title;
            editedContent.value = post.content;
          };

          // ê²Œì‹œê¸€ ë‹«ê¸° í•¨ìˆ˜
          const closePost = () => {
            // ê²Œì‹œê¸€ ë‹«ê¸° ê¸°ëŠ¥ì„ ì‘ì„±í•˜ì„¸ìš”
            selectedPost.value = null;
          };

          // ê²Œì‹œê¸€ ì¶”ê°€ í•¨ìˆ˜
          const addPost = () => {
            console.log('posts', posts);
            // ì œëª©ê³¼ ë‚´ìš©ì´ ëª¨ë‘ ìˆë‹¤ë©´(nullì´ ì•„ë‹ˆë©´)
            if (newPost.value.title && newPost.value.content) {
              let maxNum = 0;
              // ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ì¶”ê°€í•˜ê¸° ìœ„í•´ ê¸°ì¡´ì— ë°ì´í„° ì¤‘ì—ì„œ ê°€ì¥ í° no ê°’ì„ ì°¾ëŠ”ë‹¤.
              // ì°¾ì€í›„ ê·¸ ê°’ì— +1 í•´ì„œ noê°’ì„ ì„¤ì •í•´ì¤€ë‹¤.
              posts.value.forEach((post) => {
                maxNum = Math.max(maxNum, post.no);
              });
              const post = {
                no: maxNum + 1,
                title: newPost.value.title,
                content: newPost.value.content,
              };
              posts.value.push(post);

              // ìƒˆ ê²Œì‹œê¸€ ì¶”ê°€ í›„ ì…ë ¥ ê°’ ì´ˆê¸°í™”
              newPost.value.title = '';
              newPost.value.content = '';
            } else {
              alert('ê°’ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
            }
          };

          // ê²Œì‹œê¸€ ì‚­ì œ í•¨ìˆ˜
          const removePost = () => {
            const deleteNum = selectedPost.value.no;
            // í˜„ì¬ ì„ íƒëœ ê²Œì‹œê¸€ì˜ noë¥¼ ì°¾ê³  ê·¸ noê°€ ì•„ë‹Œ ê°’ë“¤ì˜ ë°°ì—´ì„ postsì— ì €ì¥
            posts.value = posts.value.filter((post) => post.no !== deleteNum);
            // ê²Œì‹œê¸€ ë‹«ê¸° í•¨ìˆ˜ ì‹¤í–‰
            closePost();
          };

          // ê²Œì‹œê¸€ ìˆ˜ì •í•˜ê¸° í•¨ìˆ˜
          const startEditing = () => {
            isUpdate.value = !isUpdate.value;
          };

          // ê²Œì‹œê¸€ ìˆ˜ì •ì™„ë£Œ í•¨ìˆ˜
          const savePost = () => {
            selectedPost.value.title = editedTitle.value;
            selectedPost.value.content = editedContent.value;
            isUpdate.value = !isUpdate.value;
          };
          return {
            posts,
            selectedPost,
            newPost,
            isUpdate,
            editedTitle,
            editedContent,
            selectPost,
            closePost,
            addPost,
            removePost,
            startEditing,
            savePost,
          };
        },
      }).mount('#app');
    </script>
  </body>
</html>
